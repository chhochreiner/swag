<?xml version="1.0" encoding="UTF-8"?>

<project name="swag-auth-helpers" basedir="." default="build">
	<!-- import our own ant tasks -->
	<import file="../ant-helpers.xml"/>
	
	<!-- ***** PROPERTIES ***************************************************************** -->
	<!-- application data -->
	<property name="application.name" value="swag-auth"/>
	
	<target name="build" depends="undeploy, setup">
		<exec executable="mvn">
			<arg value="package"/>
		</exec>
		<antcall target="deploy"/>
	</target>
	
	<!-- MANAGE GLASSFISH RESOURCES ******************************************************* -->
	<target name="setup" depends="setup-jms"/>
	
	<target name="setup-jms">
		<asadmin command="create-connector-connection-pool"
		         parameters="--raname jmsra 
		                     --connectiondefinition javax.jms.ConnectionFactory
		                     swag.JMSPool"/>
		
		<create-jms-queue name="swag.queue.Authentication"/>
	</target>
	<target name="clean-jms">
		<asadmin command="delete-connector-connection-pool"
		         parameters="--cascade=true swag.JMSPool"/>

		<delete-jms-resource name="swag.queue.Authentication"/>
	</target>
</project>
